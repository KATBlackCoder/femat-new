---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import PaginatedArticles from '../../components/PaginatedArticles.vue';
import { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';
import { useTranslations } from '../../lib/i18n/translations';

const t = useTranslations('ru');

const actualites = await getCollection('actualites', ({ data }) => data.lang === 'ru');
const articlesTries = actualites.sort((a, b) =>
  new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
);
---

<Layout
  title="Новости - FEMAT"
  description="Откройте для себя все новости и обновления Малийской федерации тхэквондо"
  lang="ru"
>
  <div class="container mx-auto px-4 py-8">
    <div class="text-center mb-12">
      <h1 class="text-4xl font-bold mb-4">{t('news.title')}</h1>
      <p class="text-xl text-muted-foreground">
        Будьте в курсе последних новостей малийского тхэквондо
      </p>
    </div>

    <!-- Список статей -->
    <PaginatedArticles
      client:load
      items={articlesTries}
      itemsPerPage={6}
      lang="ru"
      read-more-text={t('news.readMore')}
      pagination-page-label={t('pagination.page')}
      pagination-of-label={t('pagination.of')}
      pagination-article-label={t('pagination.article')}
      pagination-articles-label={t('pagination.articles')}
    />

    {articlesTries.length === 0 && (
      <Alert class="max-w-md mx-auto">
        <AlertTitle>Нет новостей</AlertTitle>
        <AlertDescription>
          В настоящее время новости недоступны. Вернитесь скоро, чтобы узнать последние новости малийского тхэквондо.
        </AlertDescription>
      </Alert>
    )}
  </div>
</Layout>
